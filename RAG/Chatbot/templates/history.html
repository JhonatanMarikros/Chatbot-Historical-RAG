{% extends "base_public.html" %}
{% block title %}Riwayat{% endblock %}
{% block content %}
<div class="container py-3" style="max-width: 1100px;">

  <div class="card shadow-sm">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th style="width:45%;">Pertanyaan</th>
              <th>Jawaban</th>
              <th style="width:110px;">Aksi</th>
            </tr>
          </thead>
          <tbody>
            {% if rows and rows|length > 0 %}
              {% for r in rows %}
              <tr>
                <td>
                  <div class="text-wrap fw-semibold"
                       style="white-space:normal; word-wrap:break-word; max-width:420px;"
                       title="{{ r.question }}">{{ r.question }}</div>
                </td>
                <td>
                  <div class="text-wrap"
                       style="white-space:normal; word-wrap:break-word; max-width:520px;"
                       title="{{ r.llm_answer or '-' }}">{{ r.llm_answer or '-' }}</div>
                </td>
                <td class="text-nowrap">
                  <form method="post"
                        action="{{ url_for('history_delete', qid=r.id) }}"
                        onsubmit="return confirm('Hapus item ini?');">
                    <button class="btn btn-sm btn-outline-danger">Hapus</button>
                  </form>
                </td>
              </tr>
              {% endfor %}
            {% else %}
              <tr>
                <td colspan="3" class="text-center py-4 text-muted">Belum ada riwayat.</td>
              </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
  @media (max-width:768px){
    .table td, .table th{font-size:14px;white-space:normal;}
    .btn{padding:4px 8px;font-size:12px;}
  }
  .d-inline{ display:inline-block; }
</style>
{% endblock %}
